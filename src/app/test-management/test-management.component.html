<div *ngIf="testSuites" class="wrapper">

  <div *ngIf="testSuites.length > 0; then existTestSuites else noExistTestSuites"></div>
  <ng-template #existTestSuites>

    <div class="content-wrapper">

      <div class="col-sm-12 col-md-12 col-lg-9">
        <app-test-cases [selectedTS]="selectedTestSuite"></app-test-cases>
      </div>

      <!-- TEST SUITES TREE COMPONENT -->
      <div *ngIf="testSuitesViewModel.length > 0" class="sidenav" [clr-nav-level]="2">
        <!-- TODO move to testsuites tree component -->

        <clr-tree-node class="suite-node" *ngFor="let testSuite of testSuitesViewModel">
          <button clrVerticalNavLink (click)="openTestSuite(testSuite)" class="clr-treenode-link">
            <clr-icon [attr.shape]="testSuite.icon"></clr-icon>
            {{ testSuite.name }}
            <clr-icon shape="plus" (click)="onAdd(testSuite);"></clr-icon>
            <clr-icon shape="pencil" (click)="onEdit(testSuite);"></clr-icon>
            <clr-icon shape="close" (click)="onDelete(testSuite);"></clr-icon>
          </button>
          <ng-template [(clrIfExpanded)]="testSuite.expanded">
            <clr-tree-node *ngFor="let subTestSuite of testSuite.children">
              <button clrVerticalNavLink (click)="openTestSuite(subTestSuite)" class="clr-treenode-link" [class.active]="subTestSuite._id === selectedTestSuite._id">
                <clr-icon [attr.shape]="subTestSuite.icon"></clr-icon>
                {{ subTestSuite.name }}
                <clr-icon shape="plus" (click)="onAdd(subTestSuite);"></clr-icon>
                <clr-icon shape="pencil" (click)="onEdit(subTestSuite);"></clr-icon>
                <clr-icon shape="close" (click)="onDelete(subTestSuite);"></clr-icon>
              </button>
              <ng-template [(clrIfExpanded)]="subTestSuite.expanded">
                  <clr-tree-node *ngFor="let thirdSubTestSuite of subTestSuite.children">
                      <button clrVerticalNavLink (click)="openTestSuite(thirdSubTestSuite)" class="clr-treenode-link" [class.active]="thirdSubTestSuite._id === selectedTestSuite._id">
                        <clr-icon [attr.shape]="thirdSubTestSuite.icon"></clr-icon>
                        {{ thirdSubTestSuite.name }}
                        <clr-icon shape="plus" (click)="onAdd(thirdSubTestSuite);"></clr-icon>
                        <clr-icon shape="pencil" (click)="onEdit(thirdSubTestSuite);"></clr-icon>
                        <clr-icon shape="close" (click)="onDelete(thirdSubTestSuite);"></clr-icon>
                      </button>
                      </clr-tree-node>
              </ng-template>
            </clr-tree-node>
          </ng-template>
        </clr-tree-node>
      </div>
    </div>

  </ng-template>

  <ng-template #noExistTestSuites>
    <div class="noexist-wrapper">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

        <div class="no-testsuites">
          <img src="assets/add-project.png">
          <h4>{{ 'TESTMANAGEMENTPAGE.EMPTYSTATE_NOTESTSUITES_TITLE' | translate }}</h4>
          <p class="tips">{{ 'TESTMANAGEMENTPAGE.EMPTYSTATE_NOTESTSUITES_DESCRIPTION' | translate }}</p>
          <a class="btn btn-primary" (click)="onAdd();">{{ 'TESTMANAGEMENTPAGE.EMPTYSTATE_CREATETESTSUITE_BUTTON' | translate }}</a>
        </div>

      </div>
    </div>

  </ng-template>

  <app-create-test-suite-modal [(opened)]="createOpened" (testsuiteChange)="createTestSuite($event);"></app-create-test-suite-modal>
  <app-edit-test-suite-modal [testsuite]="selectedTestSuite" [(opened)]="editOpened" (testsuiteChange)="updateTestSuite($event);"></app-edit-test-suite-modal>
  <app-delete-test-suite-modal [(opened)]="deleteOpened" (confirmChange)="forceDelete($event)"></app-delete-test-suite-modal>
</div>
